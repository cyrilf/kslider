<!DOCTYPE html>
<html lang="fr">
	<head>
		<title>Kslider Demo</title>
		<meta charset="utf-8">
		<link href="css/kslider.css" type="text/css" rel="stylesheet">
		<script src="js/jquery-1.8.min.js" type="text/javascript"></script>
		<script src="js/kslider.js" type="text/javascript"></script>
		<script type="text/javascript">
		$(document).ready(function(){


		  
			(function($){

				 $.fn.kslider = function(options) {

					var kslider = $(this);
					
					var widthThumb;
					
					var kbig = $('div:eq(0)', kslider).addClass('kbig');

					var defaults = {
						width: $('.kbig img').width(),
						height: $('.kbig img').height(),
						widthThumb: ($('div:eq(1)', kslider).length != 0) ? $('div:eq(1) img', kslider).width() : $('.kbig img').width() / 4 ,
						heightThumb: ($('div:eq(1)', kslider).length != 0) ? $('div:eq(1) img', kslider).height() : $('.kbig img', kslider).height() / 4 ,
						nbImage: $('div:eq(0) img', kslider).length,
						speed: 750
					};
					
					if($('div:eq(1)', kslider).length == 0)
						kbig.clone().appendTo(kslider);
						
					var ksmall = $('div:eq(1)', kslider).removeClass().addClass('ksmall');
					
					var options = $.extend(defaults, options);
					var ksmallwidth = options.nbImage*options.widthThumb;
					
					kslider.append('<div style="" class="kleft"></div><div style="" class="kright"></div>');
					kslider.css({'width': options.width,
									 'height' : options.height+options.heightThumb});
					kslider
					
					ksmallimg = $('.ksmall img');
					kbigimg = $('.kbig img');
					
					kbig.css({'height': options.height,'width':options.width});
					ksmall.css({'width': ksmallwidth});
					ksmallimg.css({'width' : options.widthThumb, 'height' : options.heightThumb});
					
					kbigimg.not(':first-child').hide();

					//Move mouse hover thumnails - Bouger la souris au dessus des miniatures
					ksmall.mousemove(function(e){
						var position = e.pageX - kslider.offset().left;
						var deplacement = -position / ((options.width)/(ksmallwidth-options.width));
						if(position < options.width && ksmallwidth > options.width) 
							$(this).css('margin-left', deplacement);
					}); 
					
					// Hover on the thumbnails - Survol des miniatures
					ksmallimg.hover(function(){
						$(this).animate({opacity: 1}, 500, 'swing');
					},
					function(){
						if(!$('.kbig img:eq('+$(this).index()+')').is(':visible'))
							$(this).stop(true,true).animate({opacity: 0.5}, 300, 'swing');
					}); 
					
					// click on the big image - click sur la grande image
					kbigimg.on('click', function() {
						var index = $(this).index();
						$(this).fadeOut(options.speed);
						
						if($(this).next().length == 0)
						{
							kbigimg.first().fadeIn(options.speed);
							ksmallimg.eq(index).animate({opacity: 0.5}, 300, 'swing');
							ksmallimg.first().animate({opacity: 1}, 500, 'swing');
							ksmall.animate({marginLeft: 0}, 500);
						}
						else
						{
							$(this).next().fadeIn(options.speed);
							ksmallimg.eq(index).animate({opacity: 0.5}, 300, 'swing');
							ksmallimg.eq(index+1).animate({opacity: 1}, 500, 'swing');
							var deplacement = (((options.width-ksmallwidth) / options.nbImage) * (index+2));
							if((deplacement<-options.widthThumb*(index+1)))
								deplacement = -options.widthThumb*index;
							
							ksmall.animate({marginLeft: deplacement}, 500);
						}
					});
					
					// click on the thumbnails - click sur les miniatures
					ksmallimg.on('click', function() {
						var index = $(this).index();
						if(!kbigimg.eq($(this).index()).is(':visible'))
						{
							kbigimg.fadeOut(options.speed);
							ksmallimg.not(this).animate({opacity: 0.5}, 500, 'swing');
						}
						kbigimg.eq(index).fadeIn(options.speed);
					});
				 };
			})(jQuery);
			
			$(window).load(function(){ $('#kslider').kslider(); });
		});
		</script>
		<style>
#kslider {
	border:4px solid #777;
	overflow:hidden;
	margin:0 auto;
	border:solid #AAA 4px;
	box-shadow: 0px 0px 20px 6px #AAA;
	border-radius':5px;
	cursor:pointer;
	position:relative;
}
#kslider .kbig img {
	position:absolute;
}
#kslider .ksmall {
	position:relative;
	border-top:2px solid #CCC;
	border-bottom:2px solid #CCC;
}
#kslider .ksmall img {
	float:left;
	opacity:0.5;
}
#kslider .kleft, #kslider .kright {
	border-color: transparent #e5e5e5 transparent transparent;
	border-style: solid;
	border-width: 20px;
	border-top-width: 70px;
	border-bottom-width: 70px;
	width: 0;
	height: 0;
	position:absolute;
	top:60px;
	opacity:0.4;
}
#kslider .kright  {
	border-color: transparent transparent transparent #e5e5e5;
	right:0px;
}
		</style>
	</head>
	<body>
		<div id="kslider">
			<div>
				<img src="img/1.jpg" alt="kslider">
				<img src="img/2.jpg" alt="kslider">
				<img src="img/1.jpg" alt="kslider">
				<img src="img/2.jpg" alt="kslider">
				<img src="img/1.jpg" alt="kslider">
				<img src="img/2.jpg" alt="kslider">				
				<img src="img/1.jpg" alt="kslider">
				<img src="img/1.jpg" alt="kslider">
				<img src="img/1.jpg" alt="kslider">
				<img src="img/1.jpg" alt="kslider">
				<img src="img/2.jpg" alt="kslider">
				<img src="img/1.jpg" alt="kslider">
				<img src="img/2.jpg" alt="kslider">
				<img src="img/1.jpg" alt="kslider">
				<img src="img/2.jpg" alt="kslider">
				<img src="img/1.jpg" alt="kslider">
				<img src="img/2.jpg" alt="kslider">
				<img src="img/1.jpg" alt="kslider">
				<img src="img/2.jpg" alt="kslider">				
				<img src="img/1.jpg" alt="kslider">
				<img src="img/1.jpg" alt="kslider">
				<img src="img/1.jpg" alt="kslider">
				<img src="img/1.jpg" alt="kslider">
				<img src="img/2.jpg" alt="kslider">
				<img src="img/1.jpg" alt="kslider">
				<img src="img/2.jpg" alt="kslider">
			</div>
			<!--<div>
				<img src="img/thumbs/1.jpg" alt="kslider">
				<img src="img/thumbs/2.jpg" alt="kslider">
				<img src="img/thumbs/1.jpg" alt="kslider">
				<img src="img/thumbs/2.jpg" alt="kslider">
				<img src="img/thumbs/1.jpg" alt="kslider">
				<img src="img/thumbs/2.jpg" alt="kslider">
			</div>-->
		</div>
	</body>
</html>