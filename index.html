<!DOCTYPE html>
<html lang="fr">
	<head>
		<title>Kslider Demo</title>
		<meta charset="utf-8">
		<link href="css/kslider.css" type="text/css" rel="stylesheet">
		<script src="js/jquery-1.8.min.js" type="text/javascript"></script>
		<script src="js/kslider.js" type="text/javascript"></script>
		<script type="text/javascript">
		$(document).ready(function(){


		  
			(function($){

				 $.fn.kslider = function(options) {

					var kslider = $(this);
					
					//Ajout de la class kbig à la 1ère div du conteneur kslider
					var kbig = $('div:eq(0)', kslider).addClass('kbig');
					
					//Récupération de la hauteur la plus haute entre les images
					var kbigheightMax = Math.max.apply(Math, $('.kbig img', kslider).map(function(){ return $(this).height(); }).get());
					
					//Récupération de la largeur entre les images
					var kbigwidthMax = Math.max.apply(Math, $('.kbig img', kslider).map(function(){ return $(this).width(); }).get());
					
					var ksmallheightMax = 0;
					var ksmallwidthMax = 0;
					if($('div:eq(1)', kslider).length == 0)
					{
						kbig.clone().appendTo(kslider);
						ksmallheightMax = kbigheightMax / 4;
						ksmallwidthMax = kbigwidthMax / 4;
						
						$('div:eq(1) img', kslider).map(function(){
							var differenceHauteur = ksmallheightMax - $(this).height()/4;
							if(differenceHauteur == 0);
								$(this).css({'height': $(this).height()/4, 'padding-top': differenceHauteur/2, 'padding-bottom': differenceHauteur/2 });
						});
					}
					else
					{
						ksmallheightMax = Math.max.apply(Math, $('div:eq(1) img', kslider).map(function(){return $(this).height();}).get());
						ksmallwidthMax = Math.max.apply(Math, $('div:eq(1) img', kslider).map(function(){return $(this).width();}).get());
					}
					
					//Ajout de la class ksmall à la 2ème div du conteneur kslider
					var ksmall = $('div:eq(1)', kslider).removeClass().addClass('ksmall');
						
						
						
					var defaults = {
						width: kbigwidthMax,
						height: kbigheightMax,
						widthThumb: ksmallwidthMax,
						heightThumb: ksmallheightMax,
						nbImage: $('div:eq(0) img', kslider).length,
						speed: 750,
						sameArea: true
					};
					var options = $.extend(defaults, options);
					
					
					
					
						$('div:eq(0) img', kslider).map(function(){
							var differenceHauteur = options.height - $(this).height();
							var differenceLargeur = options.width - $(this).width();
							if(differenceHauteur == 0);
								$(this).css({'margin-top': differenceHauteur/2, 
												 'margin-bottom': differenceHauteur/2,
												 'margin-right': differenceLargeur/2,
												 'margin-left': differenceLargeur/2, });
						})				
					
							
						var ksmallwidth = 0;
						$('div:eq(1) img', kslider).map(function(){
							if(options.sameArea)
								ksmallwidth += options.widthThumb;
							else
								ksmallwidth += $(this).width();
								
							var differenceHauteur = options.heightThumb - $(this).height();
							var differenceLargeur = options.widthThumb - $(this).width();
							if(differenceHauteur > 0)
								$(this).css({'padding-top': differenceHauteur/2, 
												 'padding-bottom': differenceHauteur/2});
							
							if(differenceLargeur > 0 && options.sameArea)
								$(this).css({'padding-right': differenceLargeur/2,
												 'padding-left': differenceLargeur/2, });

						})
						

					
					kslider.append('<div style="" class="kleft"></div><div style="" class="kright"></div>');
					kslider.css({'width': options.width,
									 'height' : options.height+options.heightThumb});

					ksmallimg = $('.ksmall img', kslider);
					kbigimg = $('.kbig img', kslider);
					
					
					kbig.css({'height': kbigheightMax,'width':options.width});
					ksmall.css({'width': ksmallwidth, 'height':options.heightThumb});
					//ksmallimg.css({'width' : options.widthThumb, 'height' : options.heightThumb});
					
					$('.kbig img', kslider).not(':first-child').hide();

					//Move mouse hover thumnails - Bouger la souris au dessus des miniatures
					ksmall.mousemove(function(e){
						var position = e.pageX - kslider.offset().left;
						var deplacement = -position / ((options.width)/(ksmallwidth-options.width));
						if(position < options.width && ksmallwidth > options.width) 
							$(this).css('margin-left', deplacement);
					}); 
					
					// Hover on the thumbnails - Survol des miniatures
					ksmallimg.hover(function(){
						$(this).animate({opacity: 1}, 500, 'swing');
					},
					function(){

						if(!$('.kbig img', kslider).eq($(this).index()).is(':visible'))
							$(this).stop(true,true).animate({opacity: 0.5}, 300, 'swing');
					}); 
					
					// click on the big image - click sur la grande image
					$('.kbig img', kslider).on('click', function() {
						var index = $(this).index();

						$(this).fadeOut(options.speed);
						
						if($(this).next().length == 0)
						{
							$('.kbig img', kslider).first().fadeIn(options.speed);
							$('.ksmall img', kslider).eq(index).animate({opacity: 0.5}, 300, 'swing');
							$('.ksmall img', kslider).first().animate({opacity: 1}, 500, 'swing');
							ksmall.animate({marginLeft: 0}, 500);
						}
						else
						{
							$(this).next().fadeIn(options.speed);
							$('.ksmall img', kslider).eq(index).animate({opacity: 0.5}, 300, 'swing');
							$('.ksmall img', kslider).eq(index+1).animate({opacity: 1}, 500, 'swing');
							var deplacement = (((options.width-ksmallwidth) / options.nbImage) * (index+2));
							if((deplacement<-options.widthThumb*(index+1)))
								deplacement = -options.widthThumb*index;
							
							ksmall.animate({marginLeft: deplacement}, 500);
						}
					});
					
					// click on the thumbnails - click sur les miniatures
					ksmallimg.on('click', function() {

						var index = $(this).index();
						if(!$('.kbig img', kslider).eq(index).is(':visible'))
						{
							$('.kbig img', kslider).fadeOut(options.speed);
							$('.ksmall img', kslider).not(this).animate({opacity: 0.5}, 500, 'swing');
						}
						$('.kbig img', kslider).eq(index).fadeIn(options.speed);
						
					});
				 };
			})(jQuery);
			
			$(window).load(function(){ 
				$('#kslider').kslider(); 
				$('#kslider2').kslider(); 
			});
		});
		</script>
		<style>
#kslider {

	overflow:hidden;
	margin:0 auto;
	border:solid #AAA 1px;
	box-shadow: 0px 0px 20px 6px #AAA;
	border-radius':5px;
	cursor:pointer;
	position:relative;
background: rgb(245,246,246);
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZjVmNmY2IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iMjElIiBzdG9wLWNvbG9yPSIjZGJkY2UyIiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iNDklIiBzdG9wLWNvbG9yPSIjYjhiYWM2IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iODAlIiBzdG9wLWNvbG9yPSIjZGRkZmUzIiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2Y1ZjZmNiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);
background: -moz-linear-gradient(-45deg, rgba(245,246,246,1) 0%, rgba(219,220,226,1) 21%, rgba(184,186,198,1) 49%, rgba(221,223,227,1) 80%, rgba(245,246,246,1) 100%);
background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,rgba(245,246,246,1)), color-stop(21%,rgba(219,220,226,1)), color-stop(49%,rgba(184,186,198,1)), color-stop(80%,rgba(221,223,227,1)), color-stop(100%,rgba(245,246,246,1)));
background: -webkit-linear-gradient(-45deg, rgba(245,246,246,1) 0%,rgba(219,220,226,1) 21%,rgba(184,186,198,1) 49%,rgba(221,223,227,1) 80%,rgba(245,246,246,1) 100%);
background: -o-linear-gradient(-45deg, rgba(245,246,246,1) 0%,rgba(219,220,226,1) 21%,rgba(184,186,198,1) 49%,rgba(221,223,227,1) 80%,rgba(245,246,246,1) 100%);
background: -ms-linear-gradient(-45deg, rgba(245,246,246,1) 0%,rgba(219,220,226,1) 21%,rgba(184,186,198,1) 49%,rgba(221,223,227,1) 80%,rgba(245,246,246,1) 100%);
background: linear-gradient(135deg, rgba(245,246,246,1) 0%,rgba(219,220,226,1) 21%,rgba(184,186,198,1) 49%,rgba(221,223,227,1) 80%,rgba(245,246,246,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f5f6f6', endColorstr='#f5f6f6',GradientType=1 );
}
#kslider .kbig img {
	position:absolute;
}
#kslider .ksmall {
	position:relative;
	border-top:2px solid #555;
	border-bottom:2px solid #CCC;
}
#kslider .ksmall img {
	float:left;
	opacity:0.5;
	background-color:#999;
}
#kslider .kleft, #kslider .kright {
	border-color: transparent #e5e5e5 transparent transparent;
	border-style: solid;
	border-width: 20px;
	border-top-width: 70px;
	border-bottom-width: 70px;
	width: 0;
	height: 0;
	position:absolute;
	top:60px;
	opacity:0.4;
}
#kslider .kright  {
	border-color: transparent transparent transparent #e5e5e5;
	right:0px;
}

#kslider2 {
	border:4px solid #777;
	overflow:hidden;
	margin:0 auto;
	border:solid #AAA 4px;
	box-shadow: 0px 0px 20px 6px #AAA;
	border-radius':5px;
	cursor:pointer;
	position:relative;
}
#kslider2 .kbig img {
	position:absolute;
}
#kslider2 .ksmall {
	position:relative;
	border-top:2px solid #CCC;
	border-bottom:2px solid #CCC;
}
#kslider2 .ksmall img {
	float:left;
	opacity:0.5;
}
#kslider2 .kleft, #kslider .kright {
	border-color: transparent #e5e5e5 transparent transparent;
	border-style: solid;
	border-width: 20px;
	border-top-width: 70px;
	border-bottom-width: 70px;
	width: 0;
	height: 0;
	position:absolute;
	top:60px;
	opacity:0.4;
}
#kslider2 .kright  {
	border-color: transparent transparent transparent #e5e5e5;
	right:0px;
}
		</style>
	</head>
	<body>
		<div id="kslider">
			<div>
				<img src="img/1.jpg" alt="kslider">
				<img src="img/2.jpg" alt="kslider">
				<img src="img/3.jpg" alt="kslider">
				<img src="img/4.png" alt="kslider">
				<img src="img/5.jpg" alt="kslider">
				<img src="img/6.png" alt="kslider">
			</div>
			<div>
				<img src="img/thumbs/1.jpg" alt="kslider">
				<img src="img/thumbs/2.jpg" alt="kslider">
				<img src="img/thumbs/3.jpg" alt="kslider">
				<img src="img/thumbs/4.png" alt="kslider">
				<img src="img/thumbs/5.jpg" alt="kslider">
				<img src="img/thumbs/6.png" alt="kslider">
			</div>
		</div>		
		<br>
		<br>
		<div id="kslider2">
			<div>
				<img src="img/1.jpg" alt="kslider2">
				<img src="img/2.jpg" alt="kslider2">
				<img src="img/3.jpg" alt="kslider2">
				<img src="img/4.png" alt="kslider2">
				<img src="img/5.jpg" alt="kslider2">
				<img src="img/6.png" alt="kslider2">
			</div>
		</div>
		
	</body>
</html>